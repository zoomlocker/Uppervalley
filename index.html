<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Storage Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Water Storage Calculator</h1>
        <label for="gaugeInput">Enter Depth Gauge Reading:</label>
        <input type="number" id="gaugeInput" max="14.5">
        <button onclick="calculate()">Calculate</button>
        <div class="results">
            <div class="result-box">
                <h3>Cumulative Volume</h3>
                <p id="cumulativeVolumeCubic">0 cu.ft.</p>
                <p id="cumulativeVolumeGallon">0 gallons</p>
            </div>
            <div class="result-box">
                <h3>Remaining Capacity</h3>
                <p id="remainingCapacityCubic">0 cu.ft.</p>
                <p id="remainingCapacityGallon">0 gallons</p>
            </div>
        </div>
    </div>

    <script>
        function calculate() {
            const gaugeDepth = parseFloat(document.getElementById('gaugeInput').value);
            
            const data = [
                { depth: 0, cumulativeVol: 0 },
                { depth: 2, cumulativeVol: 92560 },
                { depth: 4, cumulativeVol: 194773 },
                { depth: 6, cumulativeVol: 306949 },
                { depth: 8, cumulativeVol: 429544 },
                { depth: 10, cumulativeVol: 563060 },
                { depth: 12, cumulativeVol: 707822 },
                { depth: 14, cumulativeVol: 864196 }
            ];

            const maxVolumeCubic = 864196; // the volume at depth 14.5

            let interpolatedVolume = maxVolumeCubic; // defaulting to max volume if input is 14.5
            for(let i = 0; i < data.length - 1; i++) {
                if(gaugeDepth >= data[i].depth && gaugeDepth < data[i + 1].depth) {
                    const fraction = (gaugeDepth - data[i].depth) / (data[i + 1].depth - data[i].depth);
                    interpolatedVolume = data[i].cumulativeVol + fraction * (data[i + 1].cumulativeVol - data[i].cumulativeVol);
                    break;
                }
            }

            const remainingCapacityCubic = maxVolumeCubic - interpolatedVolume;
            const remainingCapacityGallon = remainingCapacityCubic * 7.48052;

            document.getElementById('cumulativeVolumeCubic').textContent = `${Math.round(interpolatedVolume).toLocaleString()} cu.ft.`;
            document.getElementById('cumulativeVolumeGallon').textContent = `${Math.round(interpolatedVolume * 7.48052).toLocaleString()} gallons`;
            document.getElementById('remainingCapacityCubic').textContent = `${Math.round(remainingCapacityCubic).toLocaleString()} cu.ft.`;
            document.getElementById('remainingCapacityGallon').textContent = `${Math.round(remainingCapacityGallon).toLocaleString()} gallons`;
        }
    </script>
</body>
</html>
